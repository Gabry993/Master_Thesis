\documentclass[a4paper,12pt,twoside,openright]{book}

\usepackage[utf8]{inputenc} % Encoding
\usepackage[english]{babel} % Lingua
\usepackage{amsmath} % Roba matematica
\usepackage{appendix} % appendices
\usepackage{amsfonts} % Roba matematica
\usepackage{amssymb} % Roba matematica
\usepackage{graphicx} % Per figure
\usepackage{wrapfig} % Per figure con caption
\usepackage{url} % Include gli url
\usepackage[hidelinks]{hyperref} % Include href e rende cliccabili ref
\usepackage{multirow} % Tabelle non omogenee
\usepackage{tabularx} % Tabelle a dimesione fissa e custom
\usepackage{subcaption} % Più figure ravvicinate
\usepackage{float} % Gestione floats (usare H)
\usepackage{listings} % Listare codice sorgente
\usepackage{verbatim} % Commenti multilinea
\usepackage{algorithm} % Pseudocode algorithm display
\usepackage{algpseudocode} % Cool pseudocode algorithm display
\usepackage{fancybox} % Fancy boxes
\usepackage{color} %colori
\usepackage[color=yellow]{todonotes} %todo notes
\usepackage{mathtools} % for prescript
\usepackage{textcomp} %for tilde
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage[font=footnotesize,labelfont=bf]{caption}
\usepackage[hmarginratio=2:3,margin=1in]{geometry}
\usepackage[printonlyused, withpage]{acronym} 
\usepackage{booktabs}
\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}

\lstset{
	breaklines=true,
	basicstyle=\ttfamily}
\usepackage{setspace}
\definecolor{Code}{rgb}{0,0,0}
\definecolor{Decorators}{rgb}{0.5,0.5,0.5}
\definecolor{Numbers}{rgb}{0.5,0,0}
\definecolor{MatchingBrackets}{rgb}{0.25,0.5,0.5}
\definecolor{Keywords}{rgb}{0,0,1}
\definecolor{self}{rgb}{0,0,0}
\definecolor{Strings}{rgb}{0,0.63,0}
\definecolor{Comments}{rgb}{0,0.63,1}
\definecolor{Backquotes}{rgb}{0,0,0}
\definecolor{Classname}{rgb}{0,0,0}
\definecolor{FunctionName}{rgb}{0,0,0}
\definecolor{Operators}{rgb}{0,0,0}
\definecolor{Background}{rgb}{0.98,0.98,0.98}
\lstdefinelanguage{Python}{
	numbers=left,
	numberstyle=\footnotesize,
	numbersep=1em,
	xleftmargin=1em,
	framextopmargin=2em,
	framexbottommargin=2em,
	showspaces=false,
	showtabs=false,
	showstringspaces=false,
	frame=l,
	tabsize=4,
	% Basic
	basicstyle=\ttfamily\small\setstretch{1},
	backgroundcolor=\color{Background},
	% Comments
	commentstyle=\color{Comments}\slshape,
	% Strings
	stringstyle=\color{Strings},
	morecomment=[s][\color{Strings}]{"""}{"""},
	morecomment=[s][\color{Strings}]{'''}{'''},
	% keywords
	morekeywords={import,from,class,def,for,while,if,is,in,elif,else,not,and,or,print,break,continue,return,True,False,None,access,as,,del,except,exec,finally,global,import,lambda,pass,print,raise,try,assert},
	keywordstyle={\color{Keywords}\bfseries},
	% additional keywords
	morekeywords={[2]@invariant,pylab,numpy,np,scipy},
	keywordstyle={[2]\color{Decorators}\slshape},
	emph={self},
	emphstyle={\color{self}\slshape},
	%
}
\newcommand{\virgolette}[1]{``#1''}
\newcommand{\OT}{OptiTrack}
\newcommand{\PB}{Parrot Bebop 2}
\newcommand{\ML}{Machine Learning}
\newcommand{\R}{\mathbb{R}}
\DeclareMathOperator*{\argmin}{arg\,min}
\setlength\parindent{0pt} % No Indentation
\DeclareMathOperator*{\argmax}{argmax} % argmax
\setlength{\extrarowheight}{0.5mm}
\definecolor{lightgold}{HTML}{FFF4B8} % colore usato per le todonotes 

\newcommand{\titolo}{Implementation of a Laser Turret with 2 Degrees of Freedom, and Applications for Human-Robot Interaction}
\newcommand{\autore}{Gabriele Abbate}
\newcommand{\matricola}{761890}
\newcommand{\relatore}{Prof. Dr. Luca Maria Gambardella}
\newcommand{\correlatoreA}{Dr. Alessandro Giusti}
\newcommand{\correlatoreB}{Dr. Boris Gromov}
\newcommand{\annoaccademico}{2017-18}
\newcommand{\tipolaurea}{Laurea Magistrale in Informatica - Master in Informatics}



\begin{document}
\pagenumbering{Roman}
%\listoftodos

% ============================
%           TITLE
% ============================

\newgeometry{margin=1.5cm}

\begin{titlepage}
	% minipage del logo
	\begin{minipage}{0.30\linewidth}
		%\includegraphics[width=0.7\textwidth]{./img/logo-bicocca-bw.jpg}\\%%%%%%%%%%%
		%\includegraphics[width=0.7\textwidth]{./img/press-usi-immagini-logo-square.png}%%%%%%%%%%%
	\end{minipage}	
	% minipage header testo
	\begin{minipage}{0.67\linewidth}
		\begin{flushleft}
			{\large Università degli Studi di Milano-Bicocca} \\[0.4cm]
			{\large \bfseries Dipartimento di Informatica, Sistemistica e Comunicazione} \\[0.4cm]
			{\large  \bfseries Corso di laurea Magistrale in Informatica}\\
			\vspace*{1.5cm}
			{\large USI Università della Svizzera Italiana} \\[0.4cm]
			{\large \bfseries Faculty of Informatics} \\[0.4cm]
			{\large  \bfseries Master in Informatics}
		\end{flushleft}
	\end{minipage}
	% titolo
	\begin{center}
		\vspace*{4cm}
		{ \huge \bfseries \titolo} \\[0.1cm]
	\end{center}
	% relatore e corelatore
	\vspace*{2cm}
	\begin{flushleft}
		{\Large \textbf{Supervisor}: \relatore} \\[0.4cm]
		{\Large \textbf{Co-Supervisor}: \correlatoreA} \\[0.4cm]
		{\Large \textbf{Co-Supervisor}: \correlatoreB} \\[0.4cm]
	\end{flushleft}
	% nome
	\vspace*{2cm}
	\begin{flushright}
		{\Large \textbf{Master Thesis of:}} \\[0.4cm]
		{\Large \autore} \\[0.2cm]
		{\Large Student Number \matricola} \\
	\end{flushright}
	% anno accademico
	\vfill
	\begin{center}
		{\Large \textbf{Academic Year 2017-2018}}
		\vspace*{1cm}
	\end{center}
	
\end{titlepage}

\restoregeometry	

% ============================
%       LISTS
% ============================

%Chapter page style redefined
\fancypagestyle{plain}{%
	\fancyhf{} % clear all header and footer fields
	\fancyfoot[C]{\bfseries \thepage} % except the center
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}}

\tableofcontents

\clearpage

\begingroup

\let\clearpage\relax
\let\cleardoublepage\relax
\clearpage
\thispagestyle{plain}
\addcontentsline{toc}{chapter}{List of Figures}
\listoffigures


\clearpage
\let\clearpage\relax
\let\cleardoublepage\relax
\thispagestyle{plain}
\addcontentsline{toc}{chapter}{List of Tables}
\listoftables

\clearpage
\let\clearpage\relax
\let\cleardoublepage\relax
\thispagestyle{plain}
\addcontentsline{toc}{chapter}{Listings}
\lstlistoflistings

\clearpage
\endgroup

%% ============================
%         INTRODUCTION
% ============================

\pagestyle{fancy}
\fancyhead{}
\fancyhead[RO, LE]{\slshape Introduction}
\fancyfoot[LO, RE]{\slshape \tipolaurea}
\fancyfoot{}
\fancyfoot[RO, LE]{\thepage}


\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}
\fancyhead[L]{\slshape \leftmark}
\fancyhead[L]{}
\fancyhead[LO, LE]{Chapter \slshape \leftmark}
\fancyhead[RO, RE]{\slshape \rightmark}
\fancyfoot[LO, RE]{\slshape \tipolaurea}
\fancyfoot[C]{}
\fancyfoot[RO, LE]{\thepage}

%Stile dell'Indice
\fancyhead[RO,LE]{\thepage}
\fancyhead[LO]{Index}
\fancyhead[RE]{Index}
\renewcommand{\footrulewidth}{0pt}


\input{./Introduction/Introduction}
\fancyhead[RO,LE]{\thepage}
\fancyhead[LO]{Introduction}
\fancyhead[RE]{Introduction}
\renewcommand{\footrulewidth}{0pt}

% ============================
%           CHAPTERS
% ============================

\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}

\cleardoublepage
\fancyhead[RO,LE]{\bfseries \thepage}
\fancyhead[LO]{\bfseries \rightmark}
\fancyhead[RE]{\bfseries Chapter \leftmark}
\renewcommand{\footrulewidth}{0pt}

\pagenumbering{arabic}

\input{./Chapters/Chapter1}
\input{./Chapters/Chapter2}
\input{./Chapters/Chapter3}
\input{./Chapters/Chapter4}
%\input{./Chapters/Chapter5}
%\input{./Chapters/Chapter6}

% ============================
%           APPENDICES
% ============================

\begin{appendices}
	\renewcommand*\appendixpagename{Appendices}
	\renewcommand*\appendixtocname{Appendices}
	\appendixpage
	\addappheadtotoc
	\input{./Appendices/AppendixA}	
	\input{./Appendices/AppendixB}	
\end{appendices}

% ============================
%          REFERENCES
% ============================

\clearpage
\addcontentsline{toc}{chapter}{References}
\renewcommand\bibname{References}
\bibliography{references}
\bibliographystyle{ieeetr}
\fancyhead[L]{}
\fancyhead[R]{\slshape References}

% ============================
%           ACRONYMS
% ============================

\phantomsection
\input{./Acronyms/acronyms}
\fancyhead[L]{}
\fancyhead[R]{\slshape Acronyms}	

%%=============================
%%		    THANKS	
%%=============================

\phantomsection
\input{./Thanks/Thanks}
\fancyhead[L]{}
\fancyhead[R]{\slshape Thanks to}
	

\end{document}
